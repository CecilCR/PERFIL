<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Autoconocimiento - Whetten & Cameron (2014)</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Work+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a4d2e;
            --primary-light: #2d6a4f;
            --accent: #ffd700;
            --bg: #faf8f3;
            --text: #2b2b2b;
            --border: #d4c5b0;
            --shadow: rgba(26, 77, 46, 0.1);
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: linear-gradient(135deg, #faf8f3 0%, #f5f0e8 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* HEADER */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            position: relative;
            letter-spacing: -1px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
            position: relative;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        /* SCREENS */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* INTRO SCREEN */
        .intro-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 8px 30px var(--shadow);
            margin-bottom: 2rem;
        }

        .intro-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .intro-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f9f9f9;
            border-radius: 12px;
            border-left: 5px solid var(--primary);
        }

        .intro-section h3 {
            font-family: 'Playfair Display', serif;
            color: var(--primary);
            font-size: 1.4rem;
            margin-bottom: 1rem;
        }

        .intro-section p {
            line-height: 1.8;
            color: #444;
            margin-bottom: 1rem;
        }

        .intro-section ul {
            margin-left: 1.5rem;
            line-height: 1.9;
            color: #555;
        }

        .highlight-box {
            background: linear-gradient(135deg, #fff9e6 0%, #fff5d6 100%);
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: center;
        }

        .highlight-box strong {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .info-item {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            text-align: center;
        }

        .info-item-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .info-item-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* BUTTONS */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            padding: 1.2rem 3rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow);
            display: block;
            margin: 2rem auto;
            font-family: 'Work Sans', sans-serif;
            width: 100%;
            max-width: 400px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--shadow);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 0.8rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        /* QUESTIONNAIRE SCREEN */
        .tabs {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 180px;
            padding: 1rem 1.5rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--text);
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px var(--shadow);
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            color: #666;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .question {
            padding: 1.5rem 0;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }

        .question:hover {
            background: #fafafa;
            margin: 0 -1rem;
            padding: 1.5rem 1rem;
        }

        .question-text {
            font-weight: 400;
            margin-bottom: 1rem;
            color: var(--text);
            line-height: 1.6;
        }

        .question-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .options-container {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .opt-btn {
            flex: 1;
            min-width: 45px;
            padding: 12px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            font-size: 1rem;
        }

        .opt-btn:hover {
            border-color: var(--primary);
            background: #f9f9f9;
        }

        .opt-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: #777;
            margin-top: 8px;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* RESULTS SCREEN */
        .results-card {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 8px 30px var(--shadow);
            margin-top: 2rem;
        }

        .results-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--primary);
            text-align: center;
            margin-bottom: 2rem;
        }

        .feedback-item {
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 12px;
            background: linear-gradient(135deg, #fdfdfd 0%, #f8f8f8 100%);
            border-left: 6px solid var(--primary);
        }

        .feedback-item h3 {
            color: var(--primary);
            margin-top: 0;
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }

        .sub-score {
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .dimension-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid var(--accent);
        }

        .dimension-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .interpretation {
            line-height: 1.8;
            color: #444;
            margin-top: 15px;
        }

        .highlight {
            background: #fff9e6;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
        }

        .subscale-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .subscale-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            text-align: center;
        }

        .subscale-label {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .subscale-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        /* CHART STYLES */
        .chart-container {
            background: linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px var(--shadow);
            border: 2px solid var(--border);
        }

        .chart-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            color: var(--primary);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        #radarChart {
            max-width: 600px;
            max-height: 600px;
            margin: 0 auto;
            display: block;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .intro-card {
                padding: 2rem 1.5rem;
            }

            .tab-content {
                padding: 1.5rem;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media print {
            .header, .tabs, .btn-primary, .btn-secondary, .action-buttons {
                display: none !important;
            }

            body {
                background: white;
            }

            .results-card {
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>

<div class="header">
    <h1>üìä Perfil de Autoconocimiento</h1>
    <p>Curso: Gesti√≥n de las Relaciones en las Organizaciones</p>
</div>

<div class="container">
    <!-- PANTALLA 1: INTRODUCCI√ìN -->
    <div id="screen-intro" class="screen active">
        <div class="intro-card">
            <h2 class="intro-title">Bienvenido al Ejercicio de Autoconocimiento</h2>
            
            <p style="text-align: center; font-size: 1.05rem; color: #555; margin-bottom: 2rem;">
                Este instrumento est√° basado en <strong>Whetten, D. A., & Cameron, K. S. (2014). <em>Desarrollo de habilidades directivas</em> (9¬™ ed.). Pearson Educaci√≥n.</strong>
            </p>

            <div class="highlight-box">
                <strong>‚è±Ô∏è Tiempo estimado: 20 minutos</strong><br>
                <span style="color: #666;">63 preguntas divididas en 3 secciones</span>
            </div>

            <div class="info-grid">
                <div class="info-item">
                    <div class="info-item-icon">üß†</div>
                    <div class="info-item-title">Estilo Cognoscitivo</div>
                    <div>18 preguntas</div>
                </div>
                <div class="info-item">
                    <div class="info-item-icon">üéØ</div>
                    <div class="info-item-title">Locus de Control</div>
                    <div>29 preguntas</div>
                </div>
                <div class="info-item">
                    <div class="info-item-icon">üåä</div>
                    <div class="info-item-title">Tolerancia a la Ambig√ºedad</div>
                    <div>16 preguntas</div>
                </div>
            </div>

            <div class="intro-section">
                <h3>üß† ¬øQu√© es el Estilo Cognoscitivo?</h3>
                <p>
                    Se refiere a tu <strong>inclinaci√≥n para percibir, interpretar y responder a la informaci√≥n</strong>. 
                    No es un atributo inherente de personalidad, sino una tendencia de aprendizaje que puedes modificar con la pr√°ctica.
                </p>
                <p><strong>Este instrumento eval√∫a tres dimensiones independientes:</strong></p>
                <ul>
                    <li><strong>Estilo de Conocimiento:</strong> √ânfasis en hechos, datos, l√≥gica y an√°lisis detallado</li>
                    <li><strong>Estilo de Planeaci√≥n:</strong> Preferencia por estructura, preparaci√≥n y metodolog√≠a sistem√°tica</li>
                    <li><strong>Estilo Creativo:</strong> Inclinaci√≥n hacia experimentaci√≥n, novedad y pensamiento no convencional</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>üéØ ¬øQu√© es el Locus de Control?</h3>
                <p>
                    Se refiere a <strong>qu√© tanto sientes que controlas tu propio destino</strong>. Es la actitud que desarrollas respecto a si los resultados de tus acciones dependen de ti (locus interno) o de fuerzas externas como la suerte o el destino (locus externo).
                </p>
                <ul>
                    <li><strong>Locus Interno:</strong> Interpretas que tus resultados dependen de tus acciones y esfuerzo</li>
                    <li><strong>Locus Externo:</strong> Atribuyes los eventos a factores fuera de tu control</li>
                </ul>
            </div>

            <div class="intro-section">
                <h3>üåä ¬øQu√© es la Tolerancia a la Ambig√ºedad?</h3>
                <p>
                    Se refiere al <strong>grado en que te sientes amenazado por situaciones ambiguas</strong> o tienes problemas para afrontarlas, ya sea porque ocurren cambios r√°pidamente, de forma imprevista, o porque la informaci√≥n es inadecuada, poco clara o compleja.
                </p>
                <p><strong>La ambig√ºedad surge de tres fuentes principales:</strong></p>
                <ul>
                    <li><strong>Novedad:</strong> Informaci√≥n o situaciones nuevas y desconocidas</li>
                    <li><strong>Complejidad:</strong> Informaci√≥n m√∫ltiple, distintiva o no relacionada</li>
                    <li><strong>Insolubilidad:</strong> Problemas muy dif√≠ciles de resolver</li>
                </ul>
            </div>

            <div class="highlight-box" style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border-color: var(--primary);">
                <strong>‚úÖ Instrucciones Importantes</strong><br><br>
                <div style="text-align: left; max-width: 600px; margin: 0 auto;">
                    ‚Ä¢ Responde con <strong>honestidad</strong> a todas las preguntas<br>
                    ‚Ä¢ No hay respuestas correctas o incorrectas<br>
                    ‚Ä¢ Tus respuestas se guardan autom√°ticamente<br>
                    ‚Ä¢ Puedes completar el cuestionario en varias sesiones<br>
                    ‚Ä¢ Al finalizar, recibir√°s un perfil detallado con interpretaci√≥n acad√©mica
                </div>
            </div>

            <button class="btn-primary" onclick="startQuestionnaire()">
                üöÄ Comenzar Cuestionario
            </button>
        </div>
    </div>

    <!-- PANTALLA 2: CUESTIONARIO -->
    <div id="screen-questionnaire" class="screen">
        <div class="tabs">
            <div class="tab active" onclick="switchTab(0)">
                <div>üß† Estilo Cognoscitivo</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">18 preguntas</small>
            </div>
            <div class="tab" onclick="switchTab(1)">
                <div>üéØ Locus de Control</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">29 preguntas</small>
            </div>
            <div class="tab" onclick="switchTab(2)">
                <div>üåä Tolerancia a la Ambig√ºedad</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">16 preguntas</small>
            </div>
        </div>

        <form id="assessmentForm">
            <!-- TAB 1: ESTILO COGNOSCITIVO -->
            <div class="tab-content active" data-tab="0">
                <h2 class="section-title">Indicador del Estilo Cognoscitivo</h2>
                <p class="section-subtitle">Indique qu√© tan de acuerdo est√° con cada enunciado. Use la siguiente escala: 1 (Totalmente en desacuerdo) a 5 (Totalmente de acuerdo).</p>
                <div id="cogBox"></div>
            </div>

            <!-- TAB 2: LOCUS DE CONTROL -->
            <div class="tab-content" data-tab="1">
                <h2 class="section-title">Escala de Locus de Control</h2>
                <p class="section-subtitle">Cada reactivo consiste en un par de opciones (a o b). Seleccione aquella con la que est√© m√°s de acuerdo.</p>
                <div id="locBox"></div>
            </div>

            <!-- TAB 3: TOLERANCIA A LA AMBIG√úEDAD -->
            <div class="tab-content" data-tab="2">
                <h2 class="section-title">Escala de Tolerancia a la Ambig√ºedad</h2>
                <p class="section-subtitle">Indique qu√© tan de acuerdo est√° con cada enunciado. Use la siguiente escala: 1 (Totalmente en desacuerdo) a 7 (Totalmente de acuerdo).</p>
                <div id="ambBox"></div>
            </div>

            <button type="button" class="btn-primary" onclick="generateProfile()">
                ‚ú® Generar Mi Perfil de Autoconocimiento
            </button>
        </form>
    </div>

    <!-- PANTALLA 3: RESULTADOS -->
    <div id="screen-results" class="screen">
        <div class="results-card">
            <h2 class="results-title">Tu Perfil de Autoconocimiento</h2>
            
            <!-- GR√ÅFICO RADAR -->
            <div class="chart-container">
                <h3 class="chart-title">üìä Visualizaci√≥n de Tu Perfil</h3>
                <canvas id="radarChart"></canvas>
            </div>
            
            <div id="resultsContent"></div>
            <div class="action-buttons">
                <button class="btn-secondary" onclick="window.print()">üìÑ Imprimir Resultados</button>
                <button class="btn-secondary" onclick="restartQuestionnaire()">üîÑ Realizar Nuevo Cuestionario</button>
            </div>
        </div>
    </div>
</div>

<script>
    // DATOS DE WHETTEN & CAMERON (2014)
    const cogQs = [
        "Para m√≠ es muy importante la elaboraci√≥n de un plan claro.",
        "Me gusta contribuir a soluciones innovadoras para los problemas.",
        "Siempre me gusta saber qu√© se debe hacer y cu√°ndo.",
        "Prefiero intercambiar ideas sobre soluciones creativas.",
        "Me gusta entender plenamente un problema.",
        "Me gustan los planes de acci√≥n detallados y programados.",
        "Me siento motivado cuando pienso en soluciones innovadoras.",
        "Me gusta analizar los problemas.",
        "Prefiero contar con una estructura clara para realizar mi trabajo.",
        "Me gusta tener una gran variedad en mi vida laboral.",
        "Realizo an√°lisis detallados de la informaci√≥n.",
        "Prefiero las reuniones bien planeadas y con una agenda clara.",
        "Me atraen m√°s las ideas nuevas que las soluciones ya existentes.",
        "Estudio cada problema hasta entender la l√≥gica subyacente.",
        "Tomo decisiones definitivas y hago seguimientos meticulosos.",
        "Me gusta extender los l√≠mites de mi capacidad.",
        "Una buena tarea es una tarea bien preparada.",
        "Trato de evitar la rutina en mi vida."
    ];

    const locQs = [
        {a:"Los l√≠deres nacen, no se hacen.", b:"Los l√≠deres se hacen, no nacen.", filter: true},
        {a:"El √©xito es principalmente suerte.", b:"El √©xito depende del trabajo duro.", ext: "a"},
        {a:"Cuando algo sale mal, es por errores que comet√≠.", b:"Las calamidades ocurren independientemente de mis acciones.", ext: "b"},
        {a:"Las guerras dependen de las acciones de los l√≠deres.", b:"Las guerras son inevitables.", ext: "b"},
        {a:"Los hijos buenos se hacen con buenos padres.", b:"Algunos ni√±os se vuelven malos sin importar los padres.", ext: "b"},
        {a:"Mi futuro depende de las circunstancias.", b:"Soy el due√±o de mi destino.", ext: "a"},
        {a:"La historia destaca a personas en el lugar correcto.", b:"Los l√≠deres efectivos toman acciones decisivas.", ext: "a"},
        {a:"Evitar castigo conduce a anarqu√≠a.", b:"No es apropiado disciplinar f√≠sicamente.", filter: true},
        {a:"Tengo poca influencia sobre lo que me sucede.", b:"El destino y la suerte son cruciales.", ext: "a"},
        {a:"Los clientes nunca estar√°n totalmente satisfechos.", b:"Se puede satisfacer a los clientes.", ext: "a"},
        {a:"Cualquiera puede destacar con motivaci√≥n.", b:"Algunos ni√±os nunca sobresaldr√°n.", ext: "b"},
        {a:"Los matrimonios buenos dependen de compatibilidad.", b:"Los matrimonios fracasan por no trabajar suficiente.", ext: "b"},
        {a:"Puedo mejorar asistiendo a capacitaci√≥n.", b:"Es p√©rdida de tiempo mejorar en clase.", ext: "b"},
        {a:"Deber√≠an ense√±arse m√°s cursos de liderazgo.", b:"Deber√≠a haber menos √©nfasis.", filter: true},
        {a:"Cuando me pasan cosas buenas es por algo que hice.", b:"Las cosas malas son por causas externas.", ext: "b"},
        {a:"Los ex√°menes no tienen relaci√≥n con lo que estudi√©.", b:"Si me preparo, obtengo buenos resultados.", ext: "a"},
        {a:"Me influye mi hor√≥scopo.", b:"Yo determino mi destino.", ext: "a"},
        {a:"El gobierno es tan grande que no puedo influir.", b:"Las personas tienen influencia real.", ext: "a"},
        {a:"Las personas buscan responsabilidad.", b:"Las personas tratan de trabajar lo menos posible.", filter: true},
        {a:"Las personas populares nacieron con carisma.", b:"Se vuelven populares por su comportamiento.", ext: "a"},
        {a:"Las cosas est√°n fuera de mi control.", b:"Yo soy responsable de mis logros.", ext: "a"},
        {a:"Los directivos h√°biles son m√°s exitosos.", b:"El √©xito tiene poco que ver con habilidades.", ext: "b"},
        {a:"Los equipos ganadores tienen suerte.", b:"Los equipos ganan por habilidad.", ext: "a"},
        {a:"La capacitaci√≥n en equipo es requisito.", b:"El esfuerzo individual es la clave.", filter: true},
        {a:"Algunos empleados son perezosos.", b:"Un directivo h√°bil puede motivar a casi todos.", ext: "a"},
        {a:"La salud econ√≥mica mejora con acciones responsables.", b:"La econom√≠a est√° fuera de control individual.", ext: "b"},
        {a:"Soy persuasivo cuando tengo raz√≥n.", b:"Puedo convencer aunque no est√© seguro.", filter: true},
        {a:"Planeo con anticipaci√≥n mis metas.", b:"Rara vez planeo porque sale bien igual.", ext: "b"},
        {a:"Las cosas est√°n destinadas a suceder.", b:"Puedo cambiar resultados con trabajo duro.", ext: "a"}
    ];

    const ambQs = [
        "Un experto que no proporciona una respuesta definitiva probablemente no sepa demasiado.",
        "Me gustar√≠a vivir en el extranjero durante un tiempo.",
        "No existe tal cosa como un problema que no puede resolverse.",
        "Las personas que ajustan su vida a un horario probablemente se pierden la alegr√≠a de vivir.",
        "Un buen trabajo es uno en el que siempre est√° claro qu√© debe hacerse.",
        "Es m√°s divertido atacar un problema complicado que resolver uno sencillo.",
        "En el largo plazo es posible lograr m√°s atacando problemas sencillos.",
        "Las personas m√°s interesantes son aquellas a quienes no les importa ser diferentes.",
        "A largo plazo, lo familiar es preferible que lo extra√±o.",
        "Las personas que insisten en respuesta s√≠ o no no conocen qu√© tan compleja es la vida.",
        "Una persona que lleva una vida uniforme tiene mucho de qu√© estar agradecido.",
        "Muchas decisiones importantes las tomamos con informaci√≥n insuficiente.",
        "Prefiero fiestas donde conozco a la mayor√≠a que con desconocidos.",
        "Los maestros que entregan tareas ambiguas dan oportunidad de mostrar iniciativa.",
        "Cuanto antes todos adquiramos valores similares, tanto mejor.",
        "Un buen maestro hace que te preguntes sobre tu manera de ver las cosas."
    ];

    let vals = { cog: {}, loc: {}, amb: {} };
    let currentTab = 0;

    // INICIALIZACI√ìN
    function init() {
        loadQuestions();
        loadSavedAnswers();
    }

    function loadQuestions() {
        // Cargar preguntas de Estilo Cognoscitivo
        const cogBox = document.getElementById('cogBox');
        cogQs.forEach((q, i) => {
            cogBox.innerHTML += `<div class="question">
                <p class="question-text"><span class="question-number">${i+1}</span>${q}</p>
                <div class="options-container" id="cog_row_${i+1}">
                    ${[1,2,3,4,5].map(v => `<button type="button" class="opt-btn" onclick="setVal('cog', ${i+1}, ${v})">${v}</button>`).join('')}
                </div>
                <div class="scale-labels"><span>Totalmente en desacuerdo</span><span>Totalmente de acuerdo</span></div>
            </div>`;
        });

        // Cargar preguntas de Locus de Control
        const locBox = document.getElementById('locBox');
        locQs.forEach((q, i) => {
            locBox.innerHTML += `<div class="question">
                <p class="question-text"><span class="question-number">${i+1}</span>Seleccione la opci√≥n con la que est√© m√°s de acuerdo:</p>
                <div class="options-container">
                    <button type="button" class="opt-btn" style="flex: 1 1 48%; min-width: 200px;" id="loc_${i+1}_a" onclick="setRadio(${i+1}, 'a')"><strong>a)</strong> ${q.a}</button>
                    <button type="button" class="opt-btn" style="flex: 1 1 48%; min-width: 200px;" id="loc_${i+1}_b" onclick="setRadio(${i+1}, 'b')"><strong>b)</strong> ${q.b}</button>
                </div>
            </div>`;
        });

        // Cargar preguntas de Tolerancia a la Ambig√ºedad
        const ambBox = document.getElementById('ambBox');
        ambQs.forEach((q, i) => {
            ambBox.innerHTML += `<div class="question">
                <p class="question-text"><span class="question-number">${i+1}</span>${q}</p>
                <div class="options-container" id="amb_row_${i+1}">
                    ${[1,2,3,4,5,6,7].map(v => `<button type="button" class="opt-btn" onclick="setVal('amb', ${i+1}, ${v})">${v}</button>`).join('')}
                </div>
                <div class="scale-labels"><span>Totalmente en desacuerdo</span><span>Totalmente de acuerdo</span></div>
            </div>`;
        });
    }

    function setVal(type, id, v) {
        vals[type][id] = v;
        const btns = document.getElementById(`${type}_row_${id}`).querySelectorAll('.opt-btn');
        btns.forEach(b => b.classList.toggle('selected', parseInt(b.innerText) === v));
        saveAnswers();
    }

    function setRadio(id, val) {
        vals.loc[id] = val;
        document.getElementById(`loc_${id}_a`).classList.toggle('selected', val === 'a');
        document.getElementById(`loc_${id}_b`).classList.toggle('selected', val === 'b');
        saveAnswers();
    }

    function saveAnswers() {
        localStorage.setItem('assessmentAnswers', JSON.stringify(vals));
    }

    function loadSavedAnswers() {
        const saved = localStorage.getItem('assessmentAnswers');
        if (saved) {
            vals = JSON.parse(saved);
            
            // Restaurar valores seleccionados
            Object.keys(vals.cog).forEach(k => {
                const btns = document.getElementById(`cog_row_${k}`)?.querySelectorAll('.opt-btn');
                btns?.forEach(b => b.classList.toggle('selected', parseInt(b.innerText) === vals.cog[k]));
            });
            
            Object.keys(vals.loc).forEach(k => {
                const val = vals.loc[k];
                document.getElementById(`loc_${k}_${val}`)?.classList.add('selected');
            });
            
            Object.keys(vals.amb).forEach(k => {
                const btns = document.getElementById(`amb_row_${k}`)?.querySelectorAll('.opt-btn');
                btns?.forEach(b => b.classList.toggle('selected', parseInt(b.innerText) === vals.amb[k]));
            });
        }
    }

    // NAVEGACI√ìN
    function startQuestionnaire() {
        showScreen('screen-questionnaire');
    }

    function switchTab(n) {
        currentTab = n;
        document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === n));
        document.querySelectorAll('.tab-content').forEach((c, i) => c.classList.toggle('active', i === n));
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    function restartQuestionnaire() {
        if (confirm('¬øEst√° seguro de que desea reiniciar? Se perder√°n todas las respuestas.')) {
            localStorage.removeItem('assessmentAnswers');
            localStorage.removeItem('assessmentResults');
            location.reload();
        }
    }

    // PROCESAMIENTO DE RESULTADOS
    function generateProfile() {
        // Validar que todas las preguntas est√©n respondidas
        const cogComplete = Object.keys(vals.cog).length === cogQs.length;
        const locComplete = Object.keys(vals.loc).length === locQs.length;
        const ambComplete = Object.keys(vals.amb).length === ambQs.length;
        
        if (!cogComplete || !locComplete || !ambComplete) {
            let missing = [];
            if (!cogComplete) missing.push('Estilo Cognoscitivo');
            if (!locComplete) missing.push('Locus de Control');
            if (!ambComplete) missing.push('Tolerancia a la Ambig√ºedad');
            
            alert(`Por favor complete todas las secciones antes de generar el perfil.\n\nFaltan: ${missing.join(', ')}`);
            return;
        }

        // C√ÅLCULO ESTILO COGNOSCITIVO
        const getC = (i) => vals.cog[i] || 0;
        const sConoc = (getC(5) + getC(8) + getC(11) + getC(14)) / 4;
        const sPlan = (getC(1) + getC(3) + getC(6) + getC(9) + getC(12) + getC(15) + getC(17)) / 7;
        const sCreat = (getC(2) + getC(4) + getC(7) + getC(10) + getC(13) + getC(16) + getC(18)) / 7;

        const maxScore = Math.max(sConoc, sPlan, sCreat);
        let dominantStyle = "";
        if (sConoc === maxScore) dominantStyle = "Conocimiento";
        else if (sPlan === maxScore) dominantStyle = "Planeaci√≥n";
        else dominantStyle = "Creativo";

        // C√ÅLCULO LOCUS DE CONTROL
        let locScore = 0;
        locQs.forEach((q, i) => {
            const idx = i + 1;
            if (!q.filter && q.ext && vals.loc[idx] === q.ext) {
                locScore++;
            }
        });

        // C√ÅLCULO TOLERANCIA A LA AMBIG√úEDAD
        let ambTotal = 0;
        const ambScores = { novedad: 0, complejidad: 0, insolubilidad: 0 };
        
        for(let i = 1; i <= 16; i++) {
            let v = vals.amb[i] || 0;
            if (i % 2 === 0) v = 8 - v;
            ambTotal += v;
            
            if ([2, 9, 11, 13].includes(i)) ambScores.novedad += v;
            if ([4, 5, 6, 7, 8, 10, 14, 16].includes(i)) ambScores.complejidad += v;
            if ([1, 3, 12].includes(i)) ambScores.insolubilidad += v;
        }

        // GENERAR RETROALIMENTACI√ìN
        document.getElementById('resultsContent').innerHTML = generateFeedback(
            {conocimiento: sConoc, planeacion: sPlan, creativo: sCreat, dominante: dominantStyle},
            {score: locScore, tipo: locScore <= 11 ? 'INTERNO' : 'EXTERNO'},
            {total: ambTotal, novedad: ambScores.novedad, complejidad: ambScores.complejidad, insolubilidad: ambScores.insolubilidad}
        );
        
        localStorage.setItem('assessmentResults', JSON.stringify({
            cognitive: {conocimiento: sConoc, planeacion: sPlan, creativo: sCreat, dominante: dominantStyle},
            locus: {score: locScore, tipo: locScore <= 11 ? 'INTERNO' : 'EXTERNO'},
            ambiguity: {total: ambTotal, novedad: ambScores.novedad, complejidad: ambScores.complejidad, insolubilidad: ambScores.insolubilidad}
        }));

        // CREAR GR√ÅFICO RADAR
        createRadarChart(
            {conocimiento: sConoc, planeacion: sPlan, creativo: sCreat},
            locScore,
            ambTotal
        );

        showScreen('screen-results');
    }

    function generateFeedback(cog, loc, amb) {
        return `
            <div class="feedback-item">
                <h3>üß† Estilo Cognoscitivo</h3>
                <div class="sub-score">Estilo Dominante: ${cog.dominante}</div>
                
                <div class="subscale-grid">
                    <div class="subscale-item">
                        <div class="subscale-label">Conocimiento</div>
                        <div class="subscale-value">${cog.conocimiento.toFixed(2)}</div>
                    </div>
                    <div class="subscale-item">
                        <div class="subscale-label">Planeaci√≥n</div>
                        <div class="subscale-value">${cog.planeacion.toFixed(2)}</div>
                    </div>
                    <div class="subscale-item">
                        <div class="subscale-label">Creativo</div>
                        <div class="subscale-value">${cog.creativo.toFixed(2)}</div>
                    </div>
                </div>

                <div class="interpretation">
                    <p><strong>¬øQu√© significa?</strong></p>
                    <p>El estilo cognoscitivo se refiere a tu <span class="highlight">inclinaci√≥n para percibir, interpretar y responder a la informaci√≥n</span>. No es personalidad, sino una tendencia de aprendizaje que puedes modificar.</p>
                    ${getCognitiveInterpretation(cog)}
                </div>
            </div>

            <div class="feedback-item">
                <h3>üéØ Locus de Control</h3>
                <div class="sub-score">Orientaci√≥n: ${loc.tipo} (${loc.score} de 24 puntos)</div>
                
                <div class="interpretation">
                    <p><strong>¬øQu√© significa?</strong></p>
                    <p>Se refiere a <span class="highlight">qu√© tanto sientes que controlas tu propio destino</span>. Es tu actitud respecto a si los resultados dependen de ti o de fuerzas externas.</p>
                    ${getLocusInterpretation(loc)}
                </div>
            </div>

            <div class="feedback-item">
                <h3>üåä Tolerancia a la Ambig√ºedad</h3>
                <div class="sub-score">Puntuaci√≥n: ${amb.total} de 112</div>
                
                <div class="subscale-grid">
                    <div class="subscale-item">
                        <div class="subscale-label">Novedad (N)</div>
                        <div class="subscale-value">${amb.novedad}</div>
                    </div>
                    <div class="subscale-item">
                        <div class="subscale-label">Complejidad (C)</div>
                        <div class="subscale-value">${amb.complejidad}</div>
                    </div>
                    <div class="subscale-item">
                        <div class="subscale-label">Insolubilidad (I)</div>
                        <div class="subscale-value">${amb.insolubilidad}</div>
                    </div>
                </div>

                <div class="interpretation">
                    <p><strong>¬øQu√© significa?</strong></p>
                    <p>Se refiere al <span class="highlight">grado en que te sientes amenazado por situaciones ambiguas</span>, ya sea por cambios r√°pidos, informaci√≥n inadecuada o complejidad.</p>
                    ${getAmbiguityInterpretation(amb)}
                </div>
            </div>
        `;
    }

    function getCognitiveInterpretation(cog) {
        let text = '';
        
        if (cog.conocimiento >= 3.5) {
            text += `<div class="dimension-box">
                <div class="dimension-title">‚úì Alto Estilo de Conocimiento (${cog.conocimiento.toFixed(2)})</div>
                <p>Das mayor importancia a <strong>hechos, detalles y datos</strong>. Buscas soluciones objetivas basadas en l√≥gica. Eres cuidadoso, analizas exhaustivamente y prefieres controlar situaciones para hacerlas correctamente.</p>
            </div>`;
        }
        
        if (cog.planeacion >= 3.5) {
            text += `<div class="dimension-box">
                <div class="dimension-title">‚úì Alto Estilo de Planeaci√≥n (${cog.planeacion.toFixed(2)})</div>
                <p>Prefieres <strong>estructura, preparaci√≥n y planeaci√≥n</strong>. Necesitas agendas claras, esquemas bien desarrollados y procesos definidos. Usas metodolog√≠a sistem√°tica y realizas seguimientos meticulosos.</p>
            </div>`;
        }
        
        if (cog.creativo >= 3.5) {
            text += `<div class="dimension-box">
                <div class="dimension-title">‚úì Alto Estilo Creativo (${cog.creativo.toFixed(2)})</div>
                <p>Prefieres la <strong>experimentaci√≥n y la creatividad</strong>. Buscas novedad, te sientes c√≥modo en ambig√ºedad, eres espont√°neo y orientado a la acci√≥n. Consideras las reglas como limitaciones.</p>
            </div>`;
        }
        
        return text + '<p style="margin-top: 15px;"><em>Nota: Estos estilos no son excluyentes. Puedes tener puntuaciones altas en m√∫ltiples dimensiones.</em></p>';
    }

    function getLocusInterpretation(loc) {
        if (loc.tipo === 'INTERNO') {
            return `<div class="dimension-box">
                <div class="dimension-title">‚úì Locus de Control Interno</div>
                <p>Interpretas que tus resultados son <strong>fruto de tus propias acciones</strong>. Asumes responsabilidad, te sientes empoderado para generar cambios y tiendes a ser proactivo en buscar soluciones.</p>
                <p><em>En gesti√≥n directiva: Tomas iniciativa, buscas soluciones activamente y asumes responsabilidad por resultados organizacionales.</em></p>
            </div>`;
        } else {
            return `<div class="dimension-box">
                <div class="dimension-title">‚óã Locus de Control Externo</div>
                <p>Tiendes a atribuir resultados a <strong>factores externos</strong> (suerte, destino, circunstancias). Esto puede limitar tu sensaci√≥n de agencia personal.</p>
                <p><em><strong>√Årea de desarrollo:</strong> Desarrollar un locus m√°s interno te ayudar√° a tomar mayor responsabilidad, ser m√°s proactivo y sentirte m√°s empoderado en roles directivos.</em></p>
            </div>`;
        }
    }

    function getAmbiguityInterpretation(amb) {
        let nivel = amb.total > 48 ? 'ALTA' : amb.total >= 44 ? 'MODERADA' : 'BAJA';
        
        let base = `<p><strong>Nivel: ${nivel}</strong></p>
            <p>Subescalas: <strong>Novedad</strong> (situaciones nuevas), <strong>Complejidad</strong> (informaci√≥n m√∫ltiple), <strong>Insolubilidad</strong> (problemas dif√≠ciles).</p>`;
        
        if (amb.total > 48) {
            return base + `<div class="dimension-box">
                <div class="dimension-title">‚úì Alta Tolerancia (${amb.total} puntos)</div>
                <p>Tienes <strong>alta complejidad cognoscitiva</strong>. Te sientes c√≥modo en ambig√ºedad, prestas atenci√≥n a m√°s informaci√≥n y eres adaptable en entornos complejos.</p>
                <p><strong>Fortalezas:</strong> Mejor transmisor de informaci√≥n, m√°s sensible a caracter√≠sticas internas de otros, adaptable, emprendedor, manejas bien cambios organizacionales.</p>
                <p><strong>Atenci√≥n:</strong> Puedes tener dificultad para enfocarte en un solo elemento y distraerte con interrupciones.</p>
            </div>`;
        } else if (amb.total >= 44) {
            return base + `<div class="dimension-box">
                <div class="dimension-title">‚óã Tolerancia Moderada (${amb.total} puntos)</div>
                <p>Muestras <strong>equilibrio entre flexibilidad y estructura</strong>. Puedes manejar cierta ambig√ºedad sin incomodidad excesiva, pero tambi√©n valoras claridad cuando est√° disponible.</p>
            </div>`;
        } else {
            return base + `<div class="dimension-box">
                <div class="dimension-title">‚óã Baja Tolerancia (${amb.total} puntos)</div>
                <p>Tiendes a <strong>percibir situaciones ambiguas como amenazantes</strong>. Prefieres claridad, estructura y situaciones predecibles. La incertidumbre te hace sentir inc√≥modo.</p>
                <p><em><strong>√Årea de desarrollo:</strong> Practicar decisiones con informaci√≥n incompleta y exponerte gradualmente a situaciones menos estructuradas puede ayudarte a desarrollar esta capacidad, valiosa en entornos organizacionales din√°micos.</em></p>
            </div>`;
        }
    }

    // CREAR GR√ÅFICO RADAR
    let radarChartInstance = null;

    function createRadarChart(cog, locScore, ambTotal) {
        // Destruir gr√°fico anterior si existe
        if (radarChartInstance) {
            radarChartInstance.destroy();
        }

        const ctx = document.getElementById('radarChart').getContext('2d');

        // Normalizar valores a escala de 0-100 para visualizaci√≥n
        const conocimientoPercent = (cog.conocimiento / 5) * 100;
        const planeacionPercent = (cog.planeacion / 5) * 100;
        const creativoPercent = (cog.creativo / 5) * 100;
        const locusPercent = ((24 - locScore) / 24) * 100; // Invertido: mayor = m√°s interno
        const ambiguedadPercent = (ambTotal / 112) * 100;

        radarChartInstance = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: [
                    'Conocimiento\n(Anal√≠tico)',
                    'Planeaci√≥n\n(Estructurado)',
                    'Creatividad\n(Innovador)',
                    'Locus Interno\n(Autocontrol)',
                    'Tolerancia a\nla Ambig√ºedad'
                ],
                datasets: [{
                    label: 'Tu Perfil',
                    data: [
                        conocimientoPercent,
                        planeacionPercent,
                        creativoPercent,
                        locusPercent,
                        ambiguedadPercent
                    ],
                    backgroundColor: 'rgba(26, 77, 46, 0.2)',
                    borderColor: 'rgba(26, 77, 46, 1)',
                    borderWidth: 3,
                    pointBackgroundColor: 'rgba(26, 77, 46, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(26, 77, 46, 1)',
                    pointRadius: 6,
                    pointHoverRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        min: 0,
                        ticks: {
                            stepSize: 20,
                            callback: function(value) {
                                return value + '%';
                            },
                            font: {
                                size: 12,
                                family: "'Work Sans', sans-serif"
                            },
                            color: '#666'
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        angleLines: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        pointLabels: {
                            font: {
                                size: 13,
                                weight: '600',
                                family: "'Work Sans', sans-serif"
                            },
                            color: '#1a4d2e',
                            padding: 15
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(26, 77, 46, 0.95)',
                        titleFont: {
                            size: 14,
                            family: "'Work Sans', sans-serif",
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13,
                            family: "'Work Sans', sans-serif"
                        },
                        padding: 12,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return 'Nivel: ' + context.parsed.r.toFixed(1) + '%';
                            }
                        }
                    }
                }
            }
        });
    }

    // Inicializar al cargar
    window.onload = init;
</script>

</body>
</html>
