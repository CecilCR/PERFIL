<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Autoconocimiento - Whetten & Cameron</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Work+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a4d2e;
            --primary-light: #2d6a4f;
            --accent: #ffd700;
            --bg: #faf8f3;
            --text: #2b2b2b;
            --border: #d4c5b0;
            --shadow: rgba(26, 77, 46, 0.1);
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: linear-gradient(135deg, #faf8f3 0%, #f5f0e8 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 4rem 2rem 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            position: relative;
            letter-spacing: -1px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
        }

        .container {
            max-width: 900px;
            margin: -2rem auto 4rem;
            padding: 0 1.5rem;
        }

        .progress-bar {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .progress-track {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 200px;
            padding: 1rem 1.5rem;
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--text);
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }

        .tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--shadow);
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 8px 30px var(--shadow);
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            color: #666;
            margin-bottom: 2rem;
            font-size: 0.95rem;
        }

        .question {
            padding: 1.5rem 0;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }

        .question:hover {
            background: #fafafa;
            margin: 0 -1rem;
            padding: 1.5rem 1rem;
        }

        .question-text {
            font-weight: 400;
            margin-bottom: 1rem;
            color: var(--text);
            line-height: 1.6;
        }

        .question-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            margin-right: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .scale-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .scale-label {
            font-size: 0.85rem;
            color: #666;
            min-width: 100px;
        }

        input[type="range"] {
            flex: 1;
            height: 8px;
            background: linear-gradient(to right, #e0e0e0 0%, #e0e0e0 100%);
            border-radius: 10px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px var(--shadow);
            transition: all 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .range-value {
            min-width: 40px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            padding: 1rem;
            background: #f8f8f8;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: #f0f0f0;
            border-color: var(--border);
        }

        .radio-option input[type="radio"] {
            margin-top: 0.2rem;
            margin-right: 1rem;
            cursor: pointer;
            accent-color: var(--primary);
            width: 20px;
            height: 20px;
        }

        .radio-option.selected {
            background: rgba(26, 77, 46, 0.05);
            border-color: var(--primary);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            padding: 1.2rem 3rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--shadow);
            display: block;
            margin: 2rem auto;
            font-family: 'Work Sans', sans-serif;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--shadow);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin-top: 2rem;
            box-shadow: 0 8px 30px var(--shadow);
            animation: fadeIn 0.5s ease;
        }

        .results.show {
            display: block;
        }

        .results-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--primary);
            text-align: center;
            margin-bottom: 2rem;
        }

        .result-card {
            background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 5px solid var(--primary);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .result-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .result-score {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            background: var(--primary);
            padding: 0.5rem 1.5rem;
            border-radius: 10px;
        }

        .result-interpretation {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
            line-height: 1.7;
        }

        .result-interpretation strong {
            color: var(--primary);
        }

        .chart-container {
            margin: 2rem 0;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 0.8rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .alert {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            color: #856404;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            .tab-content {
                padding: 1.5rem;
            }
            
            .scale-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .scale-label {
                min-width: auto;
            }
        }

        @media print {
            .header, .tabs, .btn-primary, .action-buttons {
                display: none;
            }
            
            .results {
                display: block !important;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Perfil de Autoconocimiento</h1>
        <p>Instrumentos de Evaluaci√≥n de Habilidades Directivas - Whetten & Cameron (2014)</p>
    </div>

    <div class="container">
        <div class="progress-bar">
            <div class="progress-track">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">0 de 29 preguntas respondidas (0%)</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab(0)">
                <div>üìä Estilo Cognoscitivo</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">18 preguntas</small>
            </div>
            <div class="tab" onclick="switchTab(1)">
                <div>üéØ Locus de Control</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">29 preguntas</small>
            </div>
            <div class="tab" onclick="switchTab(2)">
                <div>üåä Tolerancia a la Ambig√ºedad</div>
                <small style="display: block; margin-top: 0.3rem; font-weight: 400;">16 preguntas</small>
            </div>
        </div>

        <form id="assessmentForm">
            <!-- TAB 1: ESTILO COGNOSCITIVO -->
            <div class="tab-content active" data-tab="0">
                <h2 class="section-title">Indicador del Estilo Cognoscitivo</h2>
                <p class="section-subtitle">Indique qu√© tan de acuerdo est√° con cada enunciado. Use la siguiente escala: 1 (Totalmente en desacuerdo) a 5 (Totalmente de acuerdo).</p>
                <div id="cognitiveQuestions"></div>
            </div>

            <!-- TAB 2: LOCUS DE CONTROL -->
            <div class="tab-content" data-tab="1">
                <h2 class="section-title">Escala de Locus de Control</h2>
                <p class="section-subtitle">Cada reactivo consiste en un par de opciones (a o b). Seleccione aquella con la que est√© m√°s de acuerdo.</p>
                <div id="locusQuestions"></div>
            </div>

            <!-- TAB 3: TOLERANCIA A LA AMBIG√úEDAD -->
            <div class="tab-content" data-tab="2">
                <h2 class="section-title">Escala de Tolerancia a la Ambig√ºedad</h2>
                <p class="section-subtitle">Indique qu√© tan de acuerdo est√° con cada enunciado. Use la siguiente escala: 1 (Totalmente en desacuerdo) a 7 (Totalmente de acuerdo).</p>
                <div id="ambiguityQuestions"></div>
            </div>

            <button type="button" class="btn-primary" onclick="calculateResults()">
                Generar Perfil de Autoconocimiento
            </button>
        </form>

        <div class="results" id="resultsSection">
            <h2 class="results-title">Tu Perfil de Autoconocimiento</h2>
            <div id="resultsContent"></div>
            <div class="chart-container">
                <canvas id="resultsChart"></canvas>
            </div>
            <div class="action-buttons">
                <button class="btn-secondary" onclick="window.print()">üìÑ Imprimir Resultados</button>
                <button class="btn-secondary" onclick="exportResults()">üíæ Descargar Reporte</button>
                <button class="btn-secondary" onclick="resetAssessment()">üîÑ Nueva Evaluaci√≥n</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // DATOS DE LOS CUESTIONARIOS (Whetten & Cameron, 2014)
        
        const cognitiveData = [
            "Para m√≠ es muy importante la elaboraci√≥n de un plan claro.",
            "Me gusta contribuir a soluciones innovadoras para los problemas.",
            "Siempre me gusta saber qu√© se debe hacer y cu√°ndo.",
            "Prefiero intercambiar ideas sobre soluciones creativas.",
            "Me gusta entender plenamente un problema.",
            "Me gustan los planes de acci√≥n detallados y programados.",
            "Me siento motivado cuando pienso en soluciones innovadoras.",
            "Me gusta analizar los problemas.",
            "Prefiero contar con una estructura clara para realizar mi trabajo.",
            "Me gusta tener una gran variedad en mi vida laboral.",
            "Realizo an√°lisis detallados de la informaci√≥n.",
            "Prefiero las reuniones bien planeadas y con una agenda clara.",
            "Me atraen m√°s las ideas nuevas que las soluciones ya existentes.",
            "Estudio cada problema hasta entender la l√≥gica subyacente.",
            "Tomo decisiones definitivas y hago seguimientos meticulosos.",
            "Me gusta extender los l√≠mites de mi capacidad.",
            "Una buena tarea es una tarea bien preparada.",
            "Trato de evitar la rutina en mi vida."
        ];

        const locusData = [
            {
                a: "Los l√≠deres nacen, no se hacen.",
                b: "Los l√≠deres se hacen, no nacen.",
                filter: true
            },
            {
                a: "La gente que tiene √©xito lo obtiene en gran parte por estar en el lugar adecuado en el momento justo, o porque tiene buena suerte.",
                b: "El √©xito de las personas depende principalmente del trabajo arduo, la dedicaci√≥n y la capacidad.",
                ext: "a"
            },
            {
                a: "Cuando algo sale mal en mi vida, es por errores que comet√≠.",
                b: "Las calamidades ocurren en mi vida independientemente de las acciones que realice.",
                ext: "b"
            },
            {
                a: "El hecho de que haya guerras depende de las acciones de los l√≠deres mundiales.",
                b: "Es inevitable que haya guerras, sin importar los esfuerzos que realicen las personas.",
                ext: "b"
            },
            {
                a: "Los hijos buenos se hacen con buenos padres.",
                b: "Algunos ni√±os se vuelven malos sin importar qu√© tanto se esfuercen los padres.",
                ext: "b"
            },
            {
                a: "Mi futuro depende en gran parte de las circunstancias que enfrente.",
                b: "Soy el due√±o de mi destino.",
                ext: "a"
            },
            {
                a: "La historia lo hace, pero simplemente subrayan a personas que estuvieron en el lugar adecuado en el momento oportuno.",
                b: "Los l√≠deres efectivos son quienes toman acciones decisivas y ejercen influencia donde es importante.",
                ext: "a"
            },
            {
                a: "Evitar el castigo duro para los criminales conduce a anarqu√≠a.",
                b: "Las personas violentas merecen castigo firme, pero no es apropiado disciplinar f√≠sicamente a los ni√±os.",
                filter: true
            },
            {
                a: "Tengo poca influencia sobre las cosas que me suceden.",
                b: "El destino y la suerte son cruciales en mi vida.",
                ext: "a"
            },
            {
                a: "Los clientes nunca estar√°n totalmente satisfechos con el servicio que reciben de una compa√±√≠a, independientemente de lo que √©sta haga.",
                b: "Una empresa puede hacer felices a sus clientes cuando les da lo que desean.",
                ext: "a"
            },
            {
                a: "Cualquier persona puede destacar en la escuela si tiene suficiente motivaci√≥n.",
                b: "Algunos ni√±os nunca sobresaldr√°n en la escuela, sin importar qu√© tanto se esfuercen los maestros.",
                ext: "b"
            },
            {
                a: "Los buenos matrimonios dependen de una compatibilidad b√°sica entre los socios.",
                b: "Los matrimonios que no funcionan se deben principalmente a que una o ambas personas no trabajan lo suficiente para que el matrimonio sea exitoso.",
                ext: "b"
            },
            {
                a: "Puedo tener un efecto importante en mejorar mis habilidades si asisto con regularidad a clases de capacitaci√≥n.",
                b: "Es una p√©rdida de tiempo, dinero y esfuerzo el tratar de mejorar las habilidades administrativas en un sal√≥n de clases.",
                ext: "b"
            },
            {
                a: "Deber√≠an ense√±arse m√°s cursos de administraci√≥n y liderazgo en las universidades.",
                b: "Deber√≠a haber menos √©nfasis en impartir habilidades administrativas en las aulas.",
                filter: true
            },
            {
                a: "Cuando me pasan cosas buenas es porque hice algo bien.",
                b: "Las cosas malas que me suceden se deben en general a causas fuera de mi control.",
                ext: "b"
            },
            {
                a: "Muchas veces, cuando tomo ex√°menes, las preguntas no tienen relaci√≥n con lo que estudi√©, de manera que estudiar con ah√≠nco no ayuda en absoluto.",
                b: "La relaci√≥n entre qu√© tanto estudio y qu√© tan bien salgo en los ex√°menes es muy directa y obvia. En otras palabras, si me preparo con esmero, obtengo un buen resultado.",
                ext: "a"
            },
            {
                a: "Me influye lo que dice mi hor√≥scopo.",
                b: "Yo determino mi propio destino.",
                ext: "a"
            },
            {
                a: "El gobierno es tan grande e impersonal que no tiene sentido el que las personas comunes y corrientes traten de influir en las decisiones gubernamentales.",
                b: "Las personas individuales tienen una gran influencia real sobre lo que hace el gobierno.",
                ext: "a"
            },
            {
                a: "La mayor√≠a de las personas no entiende a qu√© grado su vida est√° bajo el control de sucesos accidentales o fortuitos.",
                b: "En realidad, casi no existe la 'suerte'. Lo que me sucede es resultado de mis propias acciones.",
                filter: true
            },
            {
                a: "Las personas populares nacieron con el carisma que conduce a su popularidad.",
                b: "Las personas se vuelven populares porque hacen cosas que otras personas admiran y desean emular.",
                ext: "a"
            },
            {
                a: "Las cosas que me suceden est√°n m√°s all√° de mi control.",
                b: "Yo, m√°s que nadie m√°s, soy responsable de mis logros.",
                ext: "a"
            },
            {
                a: "Los directivos h√°biles son directivos eficaces, porque las buenas habilidades administrativas conducen al √©xito.",
                b: "El √©xito en la administraci√≥n tiene muy poco que ver con las habilidades que uno tenga. El √©xito es m√°s una cuesti√≥n de suerte y de estar en el lugar adecuado en el momento oportuno.",
                ext: "b"
            },
            {
                a: "Los equipos que ganan juegos de pelota son simplemente afortunados.",
                b: "Los equipos que ganan juegos de pelota han adquirido la habilidad y tienen la preparaci√≥n adecuada.",
                ext: "a"
            },
            {
                a: "Creo que la capacitaci√≥n en las habilidades de trabajo en equipo debe ser un requisito para todos los l√≠deres de grupo.",
                b: "El esfuerzo individual es la clave para el √©xito, y el √©nfasis en el trabajo en equipo s√≥lo enmascara las contribuciones de los individuos.",
                filter: true
            },
            {
                a: "Algunos empleados son perezosos y no tienen deseos de trabajar.",
                b: "Si un directivo h√°bil trata de hacerlo, entonces puede motivar a casi cualquier persona a trabajar arduamente.",
                ext: "a"
            },
            {
                a: "La salud econ√≥mica de las personas mejora o se deteriora debido a las acciones responsables que ellas realizan.",
                b: "La salud econ√≥mica est√° m√°s fuera del control individual de lo que la mayor√≠a de nosotros imagina. Las condiciones econ√≥micas dependen de factores nacionales e internacionales que est√°n m√°s all√° de nuestro control.",
                ext: "b"
            },
            {
                a: "Me considero muy persuasivo cuando s√© que tengo la raz√≥n.",
                b: "Soy capaz de convencer a las personas de las cosas aun cuando no est√© seguro de tener la raz√≥n.",
                filter: true
            },
            {
                a: "Planeo con anticipaci√≥n mis metas, y hago todo lo posible para alcanzarlas.",
                b: "Rara vez planeo con anticipaci√≥n, porque las cosas en general resultan bien de todas formas.",
                ext: "b"
            },
            {
                a: "La mayor√≠a de las cosas que me suceden en la vida est√°n destinadas a suceder.",
                b: "Cuando planifico con cuidado, por lo general puedo cambiar los resultados de mi vida mediante el trabajo arduo.",
                ext: "a"
            }
        ];

        const ambiguityData = [
            "Un experto que no proporciona una respuesta definitiva probablemente no sepa demasiado.",
            "Me gustar√≠a vivir en el extranjero durante un tiempo.",
            "No existe tal cosa como un problema que no puede resolverse.",
            "Las personas que ajustan su vida a un horario probablemente se pierden la mayor parte de la alegr√≠a de vivir.",
            "Un buen trabajo es uno en el que siempre est√° claro qu√© debe hacerse y c√≥mo debe hacerse.",
            "Es m√°s divertido atacar un problema complicado que resolver uno sencillo.",
            "En el largo plazo es posible lograr m√°s mediante el ataque de problemas peque√±os y sencillos que de problemas grandes y complicados.",
            "Con frecuencia las personas m√°s interesantes son aquellas a quienes no les importa ser diferentes ni originales.",
            "A largo plazo, lo que es familiar es preferible que lo extra√±o.",
            "Las personas que insisten en una respuesta s√≠ o no simplemente no conocen qu√© tanto es compleja la vida.",
            "Una persona que lleva una vida uniforme en la que pocos cambios o acontecimientos inesperados ocurren, en realidad tiene mucho de qu√© estar agradecido.",
            "Muchas de las decisiones m√°s importantes las tomamos con base en informaci√≥n insuficiente.",
            "Prefiero las fiestas donde conozco a la mayor√≠a de las personas que las fiestas donde est√°n personas desconocidas.",
            "Los maestros o supervisores que entregan tareas indefinidas y ambiguas dan una oportunidad para que uno muestre iniciativa y originalidad.",
            "Cuanto antes todos adquiramos valores e ideales similares, tanto mejor.",
            "Un buen maestro es uno que hace que usted se pregunte sobre su manera de ver las cosas."
        ];

        // VARIABLES GLOBALES
        let currentTab = 0;
        let answers = {
            cognitive: {},
            locus: {},
            ambiguity: {}
        };

        // INICIALIZACI√ìN
        window.onload = function() {
            loadCognitiveQuestions();
            loadLocusQuestions();
            loadAmbiguityQuestions();
            loadSavedAnswers();
            updateProgress();
        };

        function loadCognitiveQuestions() {
            const container = document.getElementById('cognitiveQuestions');
            cognitiveData.forEach((question, index) => {
                const div = document.createElement('div');
                div.className = 'question';
                div.innerHTML = `
                    <div class="question-text">
                        <span class="question-number">${index + 1}</span>
                        ${question}
                    </div>
                    <div class="scale-container">
                        <span class="scale-label">Totalmente en desacuerdo</span>
                        <input type="range" 
                               min="1" 
                               max="5" 
                               value="3" 
                               id="cog_${index}"
                               oninput="updateRangeValue(this); saveAnswer('cognitive', ${index}, this.value)"
                               onchange="saveAnswer('cognitive', ${index}, this.value)">
                        <span class="scale-label">Totalmente de acuerdo</span>
                        <span class="range-value" id="cog_${index}_value">3</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function loadLocusQuestions() {
            const container = document.getElementById('locusQuestions');
            locusData.forEach((question, index) => {
                const div = document.createElement('div');
                div.className = 'question';
                div.innerHTML = `
                    <div class="question-text">
                        <span class="question-number">${index + 1}</span>
                        Seleccione la opci√≥n con la que est√© m√°s de acuerdo:
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this)">
                            <input type="radio" 
                                   name="loc_${index}" 
                                   value="a"
                                   onchange="saveAnswer('locus', ${index}, 'a')">
                            <span><strong>a)</strong> ${question.a}</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this)">
                            <input type="radio" 
                                   name="loc_${index}" 
                                   value="b"
                                   onchange="saveAnswer('locus', ${index}, 'b')">
                            <span><strong>b)</strong> ${question.b}</span>
                        </label>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function loadAmbiguityQuestions() {
            const container = document.getElementById('ambiguityQuestions');
            ambiguityData.forEach((question, index) => {
                const div = document.createElement('div');
                div.className = 'question';
                div.innerHTML = `
                    <div class="question-text">
                        <span class="question-number">${index + 1}</span>
                        ${question}
                    </div>
                    <div class="scale-container">
                        <span class="scale-label">Totalmente en desacuerdo</span>
                        <input type="range" 
                               min="1" 
                               max="7" 
                               value="4" 
                               id="amb_${index}"
                               oninput="updateRangeValue(this); saveAnswer('ambiguity', ${index}, this.value)"
                               onchange="saveAnswer('ambiguity', ${index}, this.value)">
                        <span class="scale-label">Totalmente de acuerdo</span>
                        <span class="range-value" id="amb_${index}_value">4</span>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updateRangeValue(input) {
            const valueSpan = document.getElementById(input.id + '_value');
            valueSpan.textContent = input.value;
        }

        function selectRadio(label) {
            const allOptions = label.parentElement.querySelectorAll('.radio-option');
            allOptions.forEach(opt => opt.classList.remove('selected'));
            label.classList.add('selected');
        }

        function switchTab(tabIndex) {
            currentTab = tabIndex;
            
            // Actualizar tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active', index === tabIndex);
            });
            
            // Actualizar contenido
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach((content, index) => {
                content.classList.toggle('active', index === tabIndex);
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function saveAnswer(section, index, value) {
            answers[section][index] = value;
            localStorage.setItem('assessmentAnswers', JSON.stringify(answers));
            updateProgress();
        }

        function loadSavedAnswers() {
            const saved = localStorage.getItem('assessmentAnswers');
            if (saved) {
                answers = JSON.parse(saved);
                
                // Restaurar respuestas de estilo cognoscitivo
                Object.keys(answers.cognitive || {}).forEach(key => {
                    const input = document.getElementById(`cog_${key}`);
                    if (input) {
                        input.value = answers.cognitive[key];
                        updateRangeValue(input);
                    }
                });
                
                // Restaurar respuestas de locus de control
                Object.keys(answers.locus || {}).forEach(key => {
                    const radio = document.querySelector(`input[name="loc_${key}"][value="${answers.locus[key]}"]`);
                    if (radio) {
                        radio.checked = true;
                        radio.parentElement.classList.add('selected');
                    }
                });
                
                // Restaurar respuestas de tolerancia a la ambig√ºedad
                Object.keys(answers.ambiguity || {}).forEach(key => {
                    const input = document.getElementById(`amb_${key}`);
                    if (input) {
                        input.value = answers.ambiguity[key];
                        updateRangeValue(input);
                    }
                });
            } else {
                // Inicializar valores por defecto si no hay guardados
                cognitiveData.forEach((_, index) => {
                    answers.cognitive[index] = '3';
                });
                ambiguityData.forEach((_, index) => {
                    answers.ambiguity[index] = '4';
                });
            }
            updateProgress();
        }

        function updateProgress() {
            const totalQuestions = cognitiveData.length + locusData.length + ambiguityData.length;
            const answeredQuestions = Object.keys(answers.cognitive).length + 
                                     Object.keys(answers.locus).length + 
                                     Object.keys(answers.ambiguity).length;
            
            const percentage = Math.round((answeredQuestions / totalQuestions) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = 
                `${answeredQuestions} de ${totalQuestions} preguntas respondidas (${percentage}%)`;
        }

        function validateAnswers() {
            const cogComplete = Object.keys(answers.cognitive).length === cognitiveData.length;
            const locComplete = Object.keys(answers.locus).length === locusData.length;
            const ambComplete = Object.keys(answers.ambiguity).length === ambiguityData.length;
            
            if (!cogComplete || !locComplete || !ambComplete) {
                let missing = [];
                if (!cogComplete) missing.push('Estilo Cognoscitivo');
                if (!locComplete) missing.push('Locus de Control');
                if (!ambComplete) missing.push('Tolerancia a la Ambig√ºedad');
                
                alert(`Por favor complete todas las secciones antes de generar el perfil.\n\nFaltan: ${missing.join(', ')}`);
                return false;
            }
            
            return true;
        }

        function calculateResults() {
            if (!validateAnswers()) return;
            
            // C√ÅLCULO ESTILO COGNOSCITIVO
            let knowingScore = 0;
            let planningScore = 0;
            
            // √çtems IMPARES (1,3,5,7,9,11,13,15,17) = CONOCER
            [0,2,4,6,8,10,12,14,16].forEach(i => {
                knowingScore += parseInt(answers.cognitive[i]);
            });
            
            // √çtems PARES (2,4,6,8,10,12,14,16,18) = PLANEAR
            [1,3,5,7,9,11,13,15,17].forEach(i => {
                planningScore += parseInt(answers.cognitive[i]);
            });
            
            // C√ÅLCULO LOCUS DE CONTROL
            let externalScore = 0;
            locusData.forEach((q, i) => {
                if (!q.filter && answers.locus[i] === q.ext) {
                    externalScore++;
                }
            });
            
            // C√ÅLCULO TOLERANCIA A LA AMBIG√úEDAD
            // √çtems a revertir: 1, 3, 5, 7, 9, 11, 13, 15
            const reverseItems = [0, 2, 4, 6, 8, 10, 12, 14];
            let ambiguityScore = 0;
            
            ambiguityData.forEach((q, i) => {
                let value = parseInt(answers.ambiguity[i]);
                if (reverseItems.includes(i)) {
                    value = 8 - value; // Invertir escala de 7 puntos
                }
                ambiguityScore += value;
            });
            
            // INTERPRETACIONES
            const cogStyle = knowingScore > planningScore ? 
                { type: 'CONOCER (Anal√≠tico)', desc: 'Prefieres entender los problemas a profundidad, analizar informaci√≥n detalladamente y tomar decisiones basadas en l√≥gica y datos. Tiendes a ser sistem√°tico y met√≥dico en tu enfoque.' } :
                { type: 'CREAR (Innovador)', desc: 'Prefieres generar nuevas ideas, buscar soluciones creativas y explorar posibilidades. Disfrutas la variedad, la innovaci√≥n y extender los l√≠mites de lo convencional.' };
            
            const locusType = externalScore <= 11 ?
                { type: 'INTERNO', desc: 'Crees que tienes control sobre tu vida y que tus resultados dependen principalmente de tus propias acciones, esfuerzo y decisiones. Asumes responsabilidad por tus √©xitos y fracasos.' } :
                { type: 'EXTERNO', desc: 'Tiendes a creer que factores externos (suerte, destino, circunstancias) tienen mayor influencia sobre tus resultados. Esto puede limitar tu sensaci√≥n de control personal.' };
            
            const ambLevel = ambiguityScore >= 44 && ambiguityScore <= 48 ?
                { type: 'MODERADA', desc: 'Muestras un equilibrio saludable. Puedes tolerar cierta incertidumbre sin sentirte excesivamente inc√≥modo, pero tambi√©n valoras algo de claridad y estructura.' } :
                ambiguityScore > 48 ?
                { type: 'ALTA', desc: 'Tienes alta tolerancia a la ambig√ºedad. Te sientes c√≥modo con la incertidumbre, los cambios y las situaciones poco estructuradas. Eres flexible y adaptable.' } :
                { type: 'BAJA', desc: 'Prefieres la claridad, la estructura y la predictibilidad. La ambig√ºedad puede causarte incomodidad. Valoras las situaciones bien definidas y los planes claros.' };
            
            // MOSTRAR RESULTADOS
            displayResults({
                cognitive: { knowing: knowingScore, planning: planningScore, style: cogStyle },
                locus: { score: externalScore, type: locusType },
                ambiguity: { score: ambiguityScore, type: ambLevel }
            });
        }

        function displayResults(results) {
            const content = document.getElementById('resultsContent');
            
            content.innerHTML = `
                <div class="result-card">
                    <div class="result-header">
                        <span class="result-name">Estilo Cognoscitivo</span>
                        <span class="result-score">${results.cognitive.style.type}</span>
                    </div>
                    <div class="result-interpretation">
                        <p><strong>Puntajes:</strong></p>
                        <p>‚Ä¢ Conocer (analizar/pensar): ${results.cognitive.knowing} puntos</p>
                        <p>‚Ä¢ Crear (innovar/experimentar): ${results.cognitive.planning} puntos</p>
                        <p style="margin-top: 1rem;"><strong>Interpretaci√≥n:</strong><br>${results.cognitive.style.desc}</p>
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-header">
                        <span class="result-name">Locus de Control</span>
                        <span class="result-score">${results.locus.type.type}</span>
                    </div>
                    <div class="result-interpretation">
                        <p><strong>Puntaje:</strong> ${results.locus.score} de 24 (${results.locus.score <= 11 ? 'Interno' : 'Externo'})</p>
                        <p style="margin-top: 1rem;"><strong>Interpretaci√≥n:</strong><br>${results.locus.type.desc}</p>
                        <p style="margin-top: 1rem;"><em>Nota: Puntajes de 0-11 indican locus interno. Puntajes de 12-24 indican locus externo.</em></p>
                    </div>
                </div>

                <div class="result-card">
                    <div class="result-header">
                        <span class="result-name">Tolerancia a la Ambig√ºedad</span>
                        <span class="result-score">${results.ambiguity.type.type}</span>
                    </div>
                    <div class="result-interpretation">
                        <p><strong>Puntaje:</strong> ${results.ambiguity.score} de 112</p>
                        <p style="margin-top: 1rem;"><strong>Interpretaci√≥n:</strong><br>${results.ambiguity.type.desc}</p>
                        <p style="margin-top: 1rem;"><em>Nota: Puntajes de 44-48 = Moderada. M√°s de 48 = Alta. Menos de 44 = Baja.</em></p>
                    </div>
                </div>
            `;
            
            // Crear gr√°fico
            createChart(results);
            
            // Mostrar secci√≥n de resultados
            document.getElementById('resultsSection').classList.add('show');
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            
            // Guardar resultados
            localStorage.setItem('assessmentResults', JSON.stringify(results));
        }

        function createChart(results) {
            const ctx = document.getElementById('resultsChart').getContext('2d');
            
            // Destruir gr√°fico anterior si existe
            if (window.myChart) {
                window.myChart.destroy();
            }
            
            window.myChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Conocer', 'Crear', 'Locus Interno', 'Tolerancia Ambig√ºedad'],
                    datasets: [{
                        label: 'Tu Perfil',
                        data: [
                            (results.cognitive.knowing / 45) * 100,
                            (results.cognitive.planning / 45) * 100,
                            ((24 - results.locus.score) / 24) * 100,
                            (results.ambiguity.score / 112) * 100
                        ],
                        backgroundColor: 'rgba(26, 77, 46, 0.2)',
                        borderColor: 'rgba(26, 77, 46, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(26, 77, 46, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(26, 77, 46, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Visualizaci√≥n de Tu Perfil de Autoconocimiento',
                            font: {
                                size: 18,
                                family: "'Playfair Display', serif"
                            }
                        }
                    }
                }
            });
        }

        function exportResults() {
            const results = localStorage.getItem('assessmentResults');
            if (!results) {
                alert('No hay resultados para exportar.');
                return;
            }
            
            const data = JSON.parse(results);
            const text = `PERFIL DE AUTOCONOCIMIENTO
Whetten & Cameron (2014)

=================================
ESTILO COGNOSCITIVO
=================================
Tipo: ${data.cognitive.style.type}
Conocer: ${data.cognitive.knowing} puntos
Crear: ${data.cognitive.planning} puntos
${data.cognitive.style.desc}

=================================
LOCUS DE CONTROL
=================================
Tipo: ${data.locus.type.type}
Puntaje: ${data.locus.score} de 24
${data.locus.type.desc}

=================================
TOLERANCIA A LA AMBIG√úEDAD
=================================
Tipo: ${data.ambiguity.type.type}
Puntaje: ${data.ambiguity.score} de 112
${data.ambiguity.type.desc}

Fecha: ${new Date().toLocaleDateString('es-ES')}
`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'perfil_autoconocimiento.txt';
            a.click();
        }

        function resetAssessment() {
            if (confirm('¬øEst√° seguro de que desea reiniciar la evaluaci√≥n? Se perder√°n todas las respuestas.')) {
                localStorage.removeItem('assessmentAnswers');
                localStorage.removeItem('assessmentResults');
                location.reload();
            }
        }
    </script>
</body>
</html>
