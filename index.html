<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Autoconocimiento Profesional</title>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #1a4d2e; --accent: #ffd700; --bg: #faf8f3; --text: #2b2b2b; }
        body { font-family: 'Work Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 50px; }
        .header { background: var(--primary); color: white; padding: 2rem; text-align: center; border-bottom: 5px solid var(--accent); }
        .container { max-width: 800px; margin: 2rem auto; padding: 0 1.5rem; }
        
        /* Tabs mejoradas */
        .tabs { display: flex; gap: 5px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab { flex: 1; padding: 12px; background: #eee; border: none; border-radius: 8px; cursor: pointer; text-align: center; font-weight: 600; transition: 0.3s; min-width: 150px; }
        .tab.active { background: var(--primary); color: white; }

        .tab-content { display: none; background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .tab-content.active { display: block; }

        /* Escala de Botones (Nueva interfaz más fácil de usar) */
        .question { border-bottom: 1px solid #eee; padding: 25px 0; }
        .options-container { display: flex; justify-content: space-between; margin-top: 15px; gap: 5px; }
        .opt-btn { flex: 1; padding: 10px; border: 2px solid #ddd; background: white; border-radius: 8px; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .opt-btn:hover { border-color: var(--primary); }
        .opt-btn.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .scale-labels { display: flex; justify-content: space-between; font-size: 0.75rem; color: #777; margin-top: 8px; text-transform: uppercase; letter-spacing: 0.5px; }

        .btn-submit { background: var(--primary); color: white; border: none; padding: 1.5rem; border-radius: 12px; cursor: pointer; width: 100%; font-size: 1.2rem; font-weight: bold; margin-top: 30px; }
        
        /* Retroalimentación Contextualizada */
        .results-card { display: none; margin-top: 2rem; background: white; padding: 2.5rem; border-radius: 15px; border-top: 8px solid var(--primary); }
        .feedback-item { margin-bottom: 25px; padding: 15px; border-radius: 10px; background: #f9fbf9; border: 1px solid #eef2ee; }
        .feedback-item h4 { color: var(--primary); margin-top: 0; border-bottom: 2px solid var(--accent); display: inline-block; }
    </style>
</head>
<body>

<div class="header">
    <h1>Perfil de Autoconocimiento</h1>
    <p>Asesoría Pedagógica para la Excelencia en Gestión</p>
</div>

<div class="container">
    <div class="tabs">
        <button class="tab active" onclick="switchTab(0)">Estilo Cognoscitivo</button>
        <button class="tab" onclick="switchTab(1)">Locus de Control</button>
        <button class="tab" onclick="switchTab(2)">Ambigüedad</button>
    </div>

    <form id="quizForm">
        <div class="tab-content active" id="tab0"><div id="cogBox"></div></div>
        <div class="tab-content" id="tab1"><div id="locBox"></div></div>
        <div class="tab-content" id="tab2"><div id="ambBox"></div></div>
        
        <button type="button" class="btn-submit" onclick="processResults()">Finalizar y Ver Diagnóstico Detallado</button>
    </form>

    <div id="results" class="results-card">
        <h2 style="text-align:center">Informe de Perfil Individual</h2>
        <div id="resOutput"></div>
    </div>
</div>

<script>
    // Configuración de preguntas y datos
    const cogQs = ["Plan claro", "Innovación", "Saber qué hacer", "Creatividad", "Entender problema", "Acción detallada", "Innovación continua", "Analizar problemas", "Estructura clara", "Variedad", "Análisis detallado", "Reuniones planeadas", "Ideas nuevas", "Lógica subyacente", "Decisiones definitivas", "Extender límites", "Tarea preparada", "Evitar rutina"];
    const locQs = [{a:"Líderes nacen", b:"Líderes se hacen"}, {a:"Éxito es suerte", b:"Éxito es esfuerzo"}, {a:"Mis errores", b:"Calamidades"}, {a:"Líderes causan guerra", b:"Guerras inevitables"}, {a:"Buenos padres", b:"Niños malos siempre"}, {a:"Circunstancias", b:"Dueño de destino"}, {a:"Suerte histórica", b:"Acciones decisivas"}, {a:"Castigo criminal", b:"No disciplina física"}, {a:"Poca influencia", b:"Suerte crucial"}, {a:"Clientes insatisfechos", b:"Hacerlos felices"}, {a:"Esfuerzo escolar", b:"Niños que no destacan"}, {a:"Compatibilidad", b:"Trabajar matrimonio"}, {a:"Mejorar con clase", b:"Pérdida tiempo"}, {a:"Más cursos gestión", b:"Menos énfasis"}, {a:"Mérito propio", b:"Causas externas"}, {a:"Examen injusto", b:"Estudiar rinde"}, {a:"Horóscopo", b:"Yo determino"}, {a:"Gobierno intocable", b:"Influencia ciudadana"}, {a:"Responsabilidad", b:"Poco trabajo"}, {a:"Carisma nato", b:"Conducta admirada"}, {a:"Fuera de control", b:"Responsable logros"}, {a:"Habilidad directiva", b:"Suerte y momento"}, {a:"Suerte deportiva", b:"Habilidad técnica"}, {a:"Capacitación equipo", b:"Esfuerzo individual"}, {a:"Perezosos", b:"Motivables"}, {a:"Acción responsable", b:"Economía externa"}, {a:"Persuasivo", b:"Convencer sin razón"}, {a:"Planear metas", b:"Sale bien igual"}, {a:"Destinado", b:"Trabajo duro"}];
    const ambQs = ["Experto sin respuesta", "Vivir fuera", "No hay insolubles", "Horarios quitan alegría", "Trabajo claro", "Problema complejo", "Sencillos mejor", "Gente original", "Familiar mejor", "Sí o No", "Vida estable", "Info insuficiente", "Fiestas conocidos", "Tareas ambiguas", "Valores iguales", "Maestro cuestionador"];

    function init() {
        // Render Estilo Cognoscitivo (1-5)
        const cogBox = document.getElementById('cogBox');
        cogQs.forEach((q, i) => {
            cogBox.innerHTML += `<div class="question"><p><strong>${i+1}.</strong> ${q}</p>
                <div class="options-container" id="cog_row_${i+1}">
                    ${[1,2,3,4,5].map(v => `<button type="button" class="opt-btn" onclick="setVal('cog', ${i+1}, ${v})">${v}</button>`).join('')}
                </div>
                <div class="scale-labels"><span>Desacuerdo</span><span>Acuerdo</span></div></div>`;
        });

        // Render Locus (a/b)
        const locBox = document.getElementById('locBox');
        locQs.forEach((q, i) => {
            locBox.innerHTML += `<div class="question"><p><strong>${i+1}.</strong></p>
                <div class="options-container">
                    <button type="button" class="opt-btn" id="loc_${i+1}_a" onclick="setRadio(${i+1}, 'a')">a) ${q.a}</button>
                    <button type="button" class="opt-btn" id="loc_${i+1}_b" onclick="setRadio(${i+1}, 'b')">b) ${q.b}</button>
                </div></div>`;
        });

        // Render Ambigüedad (1-7)
        const ambBox = document.getElementById('ambBox');
        ambQs.forEach((q, i) => {
            ambBox.innerHTML += `<div class="question"><p><strong>${i+1}.</strong> ${q}</p>
                <div class="options-container" id="amb_row_${i+1}">
                    ${[1,2,3,4,5,6,7].map(v => `<button type="button" class="opt-btn" onclick="setVal('amb', ${i+1}, ${v})">${v}</button>`).join('')}
                </div>
                <div class="scale-labels"><span>Poco</span><span>Mucho</span></div></div>`;
        });
    }

    let vals = { cog: {}, loc: {}, amb: {} };

    function setVal(type, id, v) {
        vals[type][id] = v;
        const btns = document.getElementById(`${type}_row_${id}`).querySelectorAll('.opt-btn');
        btns.forEach(b => b.classList.toggle('selected', parseInt(b.innerText) === v));
    }

    function setRadio(id, val) {
        vals.loc[id] = val;
        document.getElementById(`loc_${id}_a`).classList.toggle('selected', val === 'a');
        document.getElementById(`loc_${id}_b`).classList.toggle('selected', val === 'b');
    }

    function processResults() {
        // Lógica de cálculo (Whetten & Cameron)
        const getC = (i) => vals.cog[i] || 3;
        const sConoc = (getC(5)+getC(8)+getC(11)+getC(14))/4;
        const sPlan = (getC(1)+getC(3)+getC(6)+getC(9)+getC(12)+getC(15)+getC(17))/7;
        const sCreat = (getC(2)+getC(4)+getC(7)+getC(10)+getC(13)+getC(16)+getC(18))/7;

        let locScore = 0;
        const extKeys = ["2a","3b","4b","5b","6a","7a","9a","10a","11b","12b","13b","15b","16a","17a","18a","20a","21a","22b","23a","25a","26b","28b","29a"];
        extKeys.forEach(k => { if(vals.loc[k.slice(0,-1)] === k.slice(-1)) locScore++; });

        let ambTotal = 0;
        for(let i=1; i<=16; i++) { let v = vals.amb[i] || 4; if(i%2===0) v = 8-v; ambTotal += v; }

        document.getElementById('results').style.display = 'block';
        document.getElementById('resOutput').innerHTML = `
            <div class="feedback-item">
                <h4>Estilo Cognoscitivo</h4>
                <p><b>Conocimiento: ${sConoc.toFixed(1)} | Planeación: ${sPlan.toFixed(1)} | Creativo: ${sCreat.toFixed(1)}</b></p>
                <p><i>Contexto:</i> Un puntaje alto en <b>Planeación</b> indica que prefieres el orden y los datos para gestionar relaciones. Si tu puntaje <b>Creativo</b> es alto, tiendes a resolver conflictos de forma innovadora, aunque podrías parecer poco estructurado ante otros.</p>
            </div>
            <div class="feedback-item">
                <h4>Locus de Control: ${locScore} puntos</h4>
                <p><b>${locScore <= 11 ? 'Orientación Interna' : 'Orientación Externa'}</b></p>
                <p><i>Contexto:</i> Como gestor, un <b>Locus Interno</b> (0-11) significa que asumes la responsabilidad de la comunicación con tu equipo. Un <b>Locus Externo</b> (>12) sugiere que podrías culpar a las circunstancias por los problemas de relación, lo cual limita tu capacidad de liderazgo proactivo.</p>
            </div>
            <div class="feedback-item">
                <h4>Tolerancia a la Ambigüedad: ${ambTotal} pts</h4>
                <p><b>${ambTotal > 48 ? 'Alta Tolerancia' : 'Baja Tolerancia / Necesidad de Estructura'}</b></p>
                <p><i>Contexto:</i> La gestión de relaciones es intrínsecamente ambigua. Si tienes <b>Baja Tolerancia</b>, podrías sentirte frustrado ante respuestas poco claras de colegas. Si es <b>Alta</b>, te mueves con facilidad en entornos de cambio constante pero podrías descuidar detalles importantes.</p>
            </div>
        `;
        window.scrollTo(0, document.body.scrollHeight);
    }

    function switchTab(n) {
        const ts = document.querySelectorAll('.tab');
        const cs = document.querySelectorAll('.tab-content');
        ts.forEach((t, i) => t.classList.toggle('active', i === n));
        cs.forEach((c, i) => c.classList.toggle('active', i === n));
    }

    init();
</script>
</body>
</html>
